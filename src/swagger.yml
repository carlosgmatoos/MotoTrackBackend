openapi: 3.0.0
info:
  title: MotoTrack API
  description: API para el Sistema de Registro y Control de Motocicletas en Santo Domingo
  version: 1.0.0
  contact:
    email: info@mototrack.com

servers:
  - url: /api
    description: API base URL

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          example: "Error del servidor"
        message:
          type: string
          example: "Ocurrió un error interno en el servidor"

    LoginRequest:
      type: object
      required:
        - correo
        - contrasena
      properties:
        correo:
          type: string
          format: email
          example: "usuario@ejemplo.com"
        contrasena:
          type: string
          format: password
          example: "Contraseña123"

    RegisterRequest:
      type: object
      required:
        - nombres
        - apellidos
        - correo
        - contrasena
      properties:
        nombres:
          type: string
          example: "Juan Carlos"
        apellidos:
          type: string
          example: "Pérez Rodríguez"
        correo:
          type: string
          format: email
          example: "juancarlos@ejemplo.com"
        contrasena:
          type: string
          format: password
          example: "Contraseña123"

    RefreshTokenRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    AuthResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Inicio de sesión exitoso"
        data:
          type: object
          properties:
            user:
              type: object
              properties:
                id:
                  type: integer
                  example: 1
                nombres:
                  type: string
                  example: "Juan Carlos"
                apellidos:
                  type: string
                  example: "Pérez Rodríguez"
                correo:
                  type: string
                  example: "juancarlos@ejemplo.com"
                role:
                  type: string
                  example: "cliente"
            accessToken:
              type: string
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            refreshToken:
              type: string
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    TokenResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Token actualizado exitosamente"
        data:
          type: object
          properties:
            accessToken:
              type: string
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            refreshToken:
              type: string
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    UserCreateRequest:
      type: object
      required:
        - nombres
        - apellidos
        - correo
        - contrasena
        - idTipoUsuario
      properties:
        nombres:
          type: string
          example: "Juan Carlos"
        apellidos:
          type: string
          example: "Pérez Rodríguez"
        correo:
          type: string
          format: email
          example: "juancarlos@ejemplo.com"
        contrasena:
          type: string
          format: password
          example: "Contraseña123"
        idTipoUsuario:
          type: integer
          example: 2
          description: "Tipo de usuario (1: Administrador, 2: Empleado, 3: Ciudadano). Solo administradores pueden crear empleados."
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
          description: "Estado inicial del usuario"
        # Datos personales (obligatorios para crear empleados)
        cedula:
          type: string
          example: "40212345678"
          description: "Cédula de identidad (11 dígitos). Obligatorio para crear empleados."
        fechaNacimiento:
          type: string
          format: date
          example: "1990-01-15"
          description: "Fecha de nacimiento. Obligatorio para crear empleados."
        estadoCivil:
          type: string
          enum: [soltero, casado, divorciado, viudo]
          example: "soltero"
          description: "Estado civil. Obligatorio para crear empleados."
        sexo:
          type: string
          enum: [M, F]
          example: "M"
          description: "Sexo (M o F). Obligatorio para crear empleados."
        telefono:
          type: string
          example: "8091234567"
          description: "Número de teléfono (10 dígitos). Obligatorio para crear empleados."
        idTipoPersona:
          type: integer
          example: 2
          description: "ID del tipo de persona. Obligatorio para crear empleados."
        # Datos de ubicación (obligatorios para crear empleados)
        direccion:
          type: string
          example: "Calle Principal #123"
          description: "Dirección física. Obligatorio para crear empleados."
        idMunicipio:
          type: integer
          example: 5
          description: "ID del municipio. Obligatorio para crear empleados."
        idProvincia:
          type: integer
          example: 2
          description: "ID de la provincia (opcional)."

    UserUpdateRequest:
      type: object
      required:
        - id
      properties:
        id:
          type: integer
          example: 1
          description: ID del usuario a actualizar (también puede usarse como idUsuario)
        nombres:
          type: string
          example: "Juan Carlos"
        apellidos:
          type: string
          example: "Pérez Rodríguez"
        correo:
          type: string
          format: email
          example: "juancarlos@ejemplo.com"
        contrasena:
          type: string
          format: password
          example: "Contraseña123"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
        idTipoUsuario:
          type: integer
          example: 2
        datosPersonales:
          type: object
          description: Datos personales del usuario (si el usuario ya tiene una persona asociada, se actualizará; de lo contrario, se creará una nueva persona automáticamente)
          properties:
            cedula:
              type: string
              example: "40212345678"
              description: Cédula de identidad (11 dígitos)
            fechaNacimiento:
              type: string
              format: date
              example: "1990-01-15"
              description: Fecha de nacimiento
            estadoCivil:
              type: string
              enum: [soltero, casado, divorciado, viudo]
              example: "soltero"
              description: Estado civil
            sexo:
              type: string
              enum: [M, F]
              example: "M"
              description: Sexo (M o F)
            telefono:
              type: string
              example: "8091234567"
              description: Número de teléfono (10 dígitos)
            idUbicacion:
              type: integer
              example: 1
              description: ID de la ubicación relacionada
            idTipoPersona:
              type: integer
              example: 2
              description: ID del tipo de persona (recomendado)
            cargo:
              type: string
              example: "Oficial"
              description: Cargo o tipo de persona (alternativa no recomendada, usar idTipoPersona)
            direccion:
              type: string
              description: Dirección física (se creará o actualizará la ubicación correspondiente)
              example: "Calle Principal #123"
            idMunicipio:
              type: integer
              description: ID del municipio
              example: 5
            idProvincia:
              type: integer
              description: ID de la provincia (opcional)
              example: 2

    UserDeleteRequest:
      type: object
      required:
        - idUsuario
      properties:
        idUsuario:
          type: integer
          example: 1

    UsersListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 2
        data:
          type: array
          items:
            $ref: '#/components/schemas/UserProfile'

    TipoUsuario:
      type: object
      properties:
        id:
          type: integer
          example: 1
        nombre:
          type: string
          example: "Administrador"
        descripcion:
          type: string
          example: "Usuario con todos los permisos del sistema"
        permisos:
          type: object
          properties:
            crear:
              type: boolean
              example: true
            editar:
              type: boolean
              example: true
            eliminar:
              type: boolean
              example: true

    TipoUsuarioCreateRequest:
      type: object
      required:
        - nombre
      properties:
        nombre:
          type: string
          example: "Ciudadano"
          enum: [Ciudadano, Empleado, Administrador]
        descripcion:
          type: string
          example: "Usuario con acceso básico al sistema"
        poderCrear:
          type: boolean
          example: true
        poderEditar:
          type: boolean
          example: true
        poderEliminar:
          type: boolean
          example: false

    TipoUsuarioUpdateRequest:
      type: object
      required:
        - idTipoUsuario
      properties:
        idTipoUsuario:
          type: integer
          example: 4
        nombre:
          type: string
          example: "Empleado"
          enum: [Ciudadano, Empleado, Administrador]
        descripcion:
          type: string
          example: "Usuario con permisos de empleado"
        poderCrear:
          type: boolean
          example: true
        poderEditar:
          type: boolean
          example: true
        poderEliminar:
          type: boolean
          example: false

    TipoUsuarioDeleteRequest:
      type: object
      required:
        - idTipoUsuario
      properties:
        idTipoUsuario:
          type: integer
          example: 4

    TipoUsuarioResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Tipo de usuario creado exitosamente"
        data:
          $ref: '#/components/schemas/TipoUsuario'

    TiposUsuarioListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 3
        data:
          type: array
          items:
            $ref: '#/components/schemas/TipoUsuario'

    Provincia:
      type: object
      properties:
        id:
          type: integer
          example: 1
        nombreProvincia:
          type: string
          example: "Santo Domingo"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        fechaCreacion:
          type: string
          format: date-time
          example: "2023-05-15T14:30:00Z"

    ProvinciaCreateRequest:
      type: object
      required:
        - nombreProvincia
      properties:
        nombreProvincia:
          type: string
          example: "Santiago"

    ProvinciaUpdateRequest:
      type: object
      required:
        - idProvincia
      properties:
        idProvincia:
          type: integer
          example: 2
        nombreProvincia:
          type: string
          example: "Santiago de los Caballeros"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"

    ProvinciaDeleteRequest:
      type: object
      required:
        - idProvincia
      properties:
        idProvincia:
          type: integer
          example: 2

    ProvinciaResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Provincia creada exitosamente"
        data:
          $ref: '#/components/schemas/Provincia'

    ProvinciasListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 2
        data:
          type: array
          items:
            $ref: '#/components/schemas/Provincia'

    Municipio:
      type: object
      properties:
        id:
          type: integer
          example: 1
        nombreMunicipio:
          type: string
          example: "Santo Domingo Este"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        fechaCreacion:
          type: string
          format: date-time
          example: "2023-05-15T14:30:00Z"
        provincia:
          type: object
          properties:
            id:
              type: integer
              example: 1
            nombreProvincia:
              type: string
              example: "Santo Domingo"

    MunicipioCreateRequest:
      type: object
      required:
        - nombreMunicipio
        - idProvincia
      properties:
        nombreMunicipio:
          type: string
          example: "Villa Mella"
        idProvincia:
          type: integer
          example: 1

    MunicipioUpdateRequest:
      type: object
      required:
        - idMunicipio
      properties:
        idMunicipio:
          type: integer
          example: 3
        nombreMunicipio:
          type: string
          example: "Villa Mella"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        idProvincia:
          type: integer
          example: 1

    MunicipioDeleteRequest:
      type: object
      required:
        - idMunicipio
      properties:
        idMunicipio:
          type: integer
          example: 3

    MunicipioResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Municipio creado exitosamente"
        data:
          $ref: '#/components/schemas/Municipio'

    MunicipiosListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 3
        data:
          type: array
          items:
            $ref: '#/components/schemas/Municipio'

    Ubicacion:
      type: object
      properties:
        id:
          type: integer
          example: 1
        direccion:
          type: string
          example: "Calle Principal #123"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        fechaCreacion:
          type: string
          format: date-time
          example: "2023-05-15T14:30:00Z"
        municipio:
          type: object
          properties:
            id:
              type: integer
              example: 1
            nombreMunicipio:
              type: string
              example: "Santo Domingo Este"
            provincia:
              type: object
              properties:
                id:
                  type: integer
                  example: 1
                nombreProvincia:
                  type: string
                  example: "Santo Domingo"

    UbicacionCreateRequest:
      type: object
      required:
        - direccion
        - idMunicipio
      properties:
        direccion:
          type: string
          example: "Avenida Principal #456"
        idMunicipio:
          type: integer
          example: 1

    UbicacionUpdateRequest:
      type: object
      required:
        - idUbicacion
      properties:
        idUbicacion:
          type: integer
          example: 2
        direccion:
          type: string
          example: "Avenida Principal #456"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        idMunicipio:
          type: integer
          example: 1

    UbicacionDeleteRequest:
      type: object
      required:
        - idUbicacion
      properties:
        idUbicacion:
          type: integer
          example: 2

    UbicacionResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Ubicación creada exitosamente"
        data:
          $ref: '#/components/schemas/Ubicacion'

    UbicacionesListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 2
        data:
          type: array
          items:
            $ref: '#/components/schemas/Ubicacion'

    Persona:
      type: object
      properties:
        idPersona:
          type: integer
          example: 1
        nombres:
          type: string
          example: "Juan Carlos"
        apellidos:
          type: string
          example: "Pérez Rodríguez"
        cedula:
          type: string
          example: "40212345678"
        fechaNacimiento:
          type: string
          format: date
          example: "1990-01-15"
        estadoCivil:
          type: string
          enum: [soltero, casado, divorciado, viudo]
          example: "soltero"
        sexo:
          type: string
          enum: [M, F]
          example: "M"
        telefono:
          type: string
          example: "8091234567"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        idUsuario:
          type: integer
          example: 5
          description: ID del usuario asociado a esta persona
        tipoPersona:
          type: object
          properties:
            id:
              type: integer
              example: 1
            nombre:
              type: string
              example: "Ciudadano"
        ubicacion:
          type: object
          properties:
            id:
              type: integer
              example: 1
            direccion:
              type: string
              example: "Calle Principal #123"
            sector:
              type: string
              example: "Los Mina"
            municipio:
              type: string
              example: "Santo Domingo Este"
            provincia:
              type: string
              example: "Santo Domingo"

    PersonaInput:
      type: object
      properties:
        nombre:
          type: string
        apellido:
          type: string
        documento:
          type: string
        telefono:
          type: string
        correo:
          type: string
        direccion:
          type: string
        tipoPersonaId:
          type: integer
          format: int64
      required:
        - nombre
        - apellido
        - documento
        - tipoPersonaId
    
    TipoPersona:
      type: object
      properties:
        idTipoPersona:
          type: integer
          example: 1
        nombre:
          type: string
          example: "Ciudadano"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"

    TipoPersonaInput:
      type: object
      properties:
        nombre:
          type: string
        descripcion:
          type: string
      required:
        - nombre

    PersonaResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Persona creada exitosamente"
        data:
          $ref: '#/components/schemas/Persona'

    PersonasListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: array
          items:
            $ref: '#/components/schemas/Persona'

    PersonaCreateRequest:
      type: object
      required:
        - nombres
        - apellidos
        - cedula
      properties:
        nombres:
          type: string
          example: "Juan"
        apellidos:
          type: string
          example: "Pérez"
        cedula:
          type: string
          example: "40212345678"
        fechaNacimiento:
          type: string
          format: date
          example: "1990-01-15"
        estadoCivil:
          type: string
          enum: [soltero, casado, divorciado, viudo]
          example: "soltero"
        sexo:
          type: string
          enum: [M, F]
          example: "M"
        telefono:
          type: string
          example: "8091234567"
        idUbicacion:
          type: integer
          example: 1
        idTipoPersona:
          type: integer
          example: 1
        idUsuario:
          type: integer
          description: ID del usuario al que se asociará la persona (opcional)
          example: 5
        crearUsuario:
          type: boolean
          description: Indica si se debe crear un nuevo usuario junto con la persona
          example: true
        datosUsuario:
          type: object
          description: Datos para el nuevo usuario (obligatorio si crearUsuario es true)
          properties:
            correo:
              type: string
              format: email
              example: "juan@example.com"
            contrasena:
              type: string
              format: password
              example: "Contraseña123"
            idTipoUsuario:
              type: integer
              example: 3

    PersonaUpdateRequest:
      type: object
      required:
        - idPersona
      properties:
        idPersona:
          type: integer
          example: 1
        nombres:
          type: string
          example: "Juan"
          description: "Actualiza tanto los nombres de la persona como los del usuario asociado"
        apellidos:
          type: string
          example: "Pérez"
          description: "Actualiza tanto los apellidos de la persona como los del usuario asociado"
        cedula:
          type: string
          example: "40212345678"
          description: "Cédula de identidad (11 dígitos)"
        fechaNacimiento:
          type: string
          format: date
          example: "1990-01-15"
          description: "Fecha de nacimiento"
        estadoCivil:
          type: string
          enum: [soltero, casado, divorciado, viudo]
          example: "soltero"
          description: "Estado civil"
        sexo:
          type: string
          enum: [M, F]
          example: "M"
          description: "Sexo (M o F)"
        telefono:
          type: string
          example: "8091234567"
          description: "Número de teléfono (10 dígitos)"
        # Campos de ubicación (ciudadanos pueden actualizar su propia ubicación, 
        # administradores pueden actualizar la ubicación de empleados)
        direccion:
          type: string
          description: "Dirección física"
          example: "Calle Principal #123"
        idMunicipio:
          type: integer
          description: "ID del municipio"
          example: 5
        municipio:
          type: string
          description: "Nombre del municipio (alternativa a idMunicipio)"
          example: "Santo Domingo Este"
        idProvincia:
          type: integer
          description: "ID de la provincia"
          example: 2
        provincia:
          type: string
          description: "Nombre de la provincia (alternativa a idProvincia)"
          example: "Santo Domingo"

    AuthResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Administrador inicial creado exitosamente"
        data:
          type: object
          properties:
            user:
              type: object
              properties:
                id:
                  type: integer
                  example: 1
                nombres:
                  type: string
                  example: "Admin"
                apellidos:
                  type: string
                  example: "Principal"
                correo:
                  type: string
                  format: email
                  example: "admin@mototrack.com"
                role:
                  type: string
                  example: "administrador"
            accessToken:
              type: string
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            refreshToken:
              type: string
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          example: "Datos inválidos"
        message:
          type: string
          example: "El token de inicialización es incorrecto"

    GenericResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Operación completada exitosamente"

    TipoPersonaResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Tipo de persona creado exitosamente"
        data:
          $ref: '#/components/schemas/TipoPersona'
          
    TiposPersonaListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: array
          items:
            $ref: '#/components/schemas/TipoPersona'

    TipoPersonaCreateRequest:
      type: object
      required:
        - nombre
      properties:
        nombre:
          type: string
          example: "Gerente"

    TipoPersonaUpdateRequest:
      type: object
      properties:
        nombre:
          type: string
          example: "Supervisor"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"

    TipoPersonaDeleteRequest:
      type: object
      required:
        - idTipoPersona
      properties:
        idTipoPersona:
          type: integer
          description: ID del tipo de persona a eliminar
          example: 1

    TipoPersonaResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Tipo de persona eliminado exitosamente"
        data:
          $ref: '#/components/schemas/TipoPersona'

    TiposPersonaListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: array
          items:
            $ref: '#/components/schemas/TipoPersona'

    # Esquemas para Marca
    Marca:
      type: object
      properties:
        id:
          type: integer
          example: 1
        nombre:
          type: string
          example: "Honda"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        fechaCreacion:
          type: string
          format: date-time
          example: "2023-05-15T14:30:00Z"

    MarcaCreateRequest:
      type: object
      required:
        - nombre
      properties:
        nombre:
          type: string
          example: "Yamaha"

    MarcaUpdateRequest:
      type: object
      required:
        - idMarca
      properties:
        idMarca:
          type: integer
          example: 2
        nombre:
          type: string
          example: "Yamaha"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"

    MarcaDeleteRequest:
      type: object
      required:
        - idMarca
      properties:
        idMarca:
          type: integer
          example: 2

    MarcaResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Marca creada exitosamente"
        data:
          $ref: '#/components/schemas/Marca'

    MarcasListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 3
        data:
          type: array
          items:
            $ref: '#/components/schemas/Marca'

    # Esquemas para Modelo
    Modelo:
      type: object
      properties:
        id:
          type: integer
          example: 1
        nombre:
          type: string
          example: "CBR 600"
        año:
          type: integer
          example: 2023
        color:
          type: string
          example: "Rojo"
        cilindraje:
          type: string
          example: "600cc"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        fechaCreacion:
          type: string
          format: date-time
          example: "2023-05-15T14:30:00Z"
        idMarca:
          type: integer
          example: 1
        nombreMarca:
          type: string
          example: "Honda"

    ModeloCreateRequest:
      type: object
      required:
        - nombre
        - año
        - idMarca
      properties:
        nombre:
          type: string
          example: "CBR 600"
        año:
          type: integer
          example: 2023
        color:
          type: string
          example: "Rojo"
        cilindraje:
          type: string
          example: "600cc"
        idMarca:
          type: integer
          example: 1

    ModeloUpdateRequest:
      type: object
      required:
        - idModelo
      properties:
        idModelo:
          type: integer
          example: 2
        nombre:
          type: string
          example: "CBR 600"
        año:
          type: integer
          example: 2023
        color:
          type: string
          example: "Negro"
        cilindraje:
          type: string
          example: "600cc"
        idMarca:
          type: integer
          example: 1
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"

    ModeloDeleteRequest:
      type: object
      required:
        - idModelo
      properties:
        idModelo:
          type: integer
          example: 2

    ModeloResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Modelo creado exitosamente"
        data:
          $ref: '#/components/schemas/Modelo'

    ModelosListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 3
        data:
          type: array
          items:
            $ref: '#/components/schemas/Modelo'

    # Esquemas para TipoVehiculo
    TipoVehiculo:
      type: object
      properties:
        id:
          type: integer
          example: 1
        nombre:
          type: string
          example: "Motocicleta"
        capacidad:
          type: integer
          example: 2
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        fechaCreacion:
          type: string
          format: date-time
          example: "2023-05-15T14:30:00Z"

    TipoVehiculoCreateRequest:
      type: object
      required:
        - nombre
      properties:
        nombre:
          type: string
          example: "Motocicleta"
        capacidad:
          type: integer
          example: 2

    TipoVehiculoUpdateRequest:
      type: object
      required:
        - idTipoVehiculo
      properties:
        idTipoVehiculo:
          type: integer
          example: 2
        nombre:
          type: string
          example: "Motocicleta"
        capacidad:
          type: integer
          example: 2
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"

    TipoVehiculoDeleteRequest:
      type: object
      required:
        - idTipoVehiculo
      properties:
        idTipoVehiculo:
          type: integer
          example: 2

    TipoVehiculoResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Tipo de vehículo creado exitosamente"
        data:
          $ref: '#/components/schemas/TipoVehiculo'

    TiposVehiculoListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 3
        data:
          type: array
          items:
            $ref: '#/components/schemas/TipoVehiculo'

    # Esquemas para Seguro
    Seguro:
      type: object
      properties:
        id:
          type: integer
          example: 1
        proveedor:
          type: string
          example: "Seguros Patria"
        numeroPoliza:
          type: string
          example: "POL-123456"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        fechaCreacion:
          type: string
          format: date-time
          example: "2023-05-15T14:30:00Z"

    SeguroCreateRequest:
      type: object
      required:
        - proveedor
        - numeroPoliza
      properties:
        proveedor:
          type: string
          example: "Seguros Patria"
        numeroPoliza:
          type: string
          example: "POL-123456"

    SeguroUpdateRequest:
      type: object
      required:
        - idSeguro
      properties:
        idSeguro:
          type: integer
          example: 2
        proveedor:
          type: string
          example: "Seguros Patria"
        numeroPoliza:
          type: string
          example: "POL-789012"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"

    SeguroDeleteRequest:
      type: object
      required:
        - idSeguro
      properties:
        idSeguro:
          type: integer
          example: 2

    SeguroResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Seguro creado exitosamente"
        data:
          $ref: '#/components/schemas/Seguro'

    SegurosListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 3
        data:
          type: array
          items:
            $ref: '#/components/schemas/Seguro'

    # Esquemas para Vehiculo
    Vehiculo:
      type: object
      properties:
        id:
          type: integer
          example: 1
        chasis:
          type: string
          example: "1HGCM82633A123456"
        tipoUso:
          type: string
          enum: [Personal, Recreativo, Transporte, Deportivo, Empresarial]
          example: "Personal"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        fechaCreacion:
          type: string
          format: date-time
          example: "2023-05-15T14:30:00Z"
        idModelo:
          type: integer
          example: 1
        nombreModelo:
          type: string
          example: "CBR 600"
        añoModelo:
          type: integer
          example: 2023
        nombreMarca:
          type: string
          example: "Honda"
        idPropietario:
          type: integer
          example: 1
        nombrePropietario:
          type: string
          example: "Juan Pérez"
        idTipoVehiculo:
          type: integer
          example: 1
        nombreTipoVehiculo:
          type: string
          example: "Motocicleta"
        idSeguro:
          type: integer
          example: 1
        proveedorSeguro:
          type: string
          example: "Seguros Patria"
        numeroPoliza:
          type: string
          example: "POL-123456"
        idMatricula:
          type: integer
          example: 1

    VehiculoCreateRequest:
      type: object
      required:
        - chasis
        - tipoUso
        - idModelo
        - idPropietario
        - idTipoVehiculo
        - idSeguro
      properties:
        chasis:
          type: string
          example: "1HGCM82633A123456"
        tipoUso:
          type: string
          enum: [Personal, Recreativo, Transporte, Deportivo, Empresarial]
          example: "Personal"
        idModelo:
          type: integer
          example: 1
        idPropietario:
          type: integer
          example: 1
        idTipoVehiculo:
          type: integer
          example: 1
        idSeguro:
          type: integer
          example: 1
        idMatricula:
          type: integer
          example: 1

    VehiculoUpdateRequest:
      type: object
      required:
        - idVehiculo
      properties:
        idVehiculo:
          type: integer
          example: 2
        chasis:
          type: string
          example: "1HGCM82633A789012"
        tipoUso:
          type: string
          enum: [Personal, Recreativo, Transporte, Deportivo, Empresarial]
          example: "Recreativo"
        idModelo:
          type: integer
          example: 2
        idPropietario:
          type: integer
          example: 3
        idTipoVehiculo:
          type: integer
          example: 1
        idSeguro:
          type: integer
          example: 2
        idMatricula:
          type: integer
          example: 2
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"

    VehiculoDeleteRequest:
      type: object
      required:
        - idVehiculo
      properties:
        idVehiculo:
          type: integer
          example: 2

    VehiculoResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Vehículo creado exitosamente"
        data:
          $ref: '#/components/schemas/Vehiculo'

    VehiculosListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 3
        data:
          type: array
          items:
            $ref: '#/components/schemas/Vehiculo'

    # Adding AdminEmployeeUsers schema
    AdminEmployeeUsersResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        count:
          type: integer
          example: 5
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                example: 1
              nombres:
                type: string
                example: "Admin"
              apellidos:
                type: string
                example: "Principal"
              estado:
                type: string
                example: "activo"
              fechaCreacion:
                type: string
                format: date-time
                example: "2023-01-01T10:00:00Z"
              ftPerfil:
                type: string
                example: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQE..."
              tipoUsuario:
                type: object
                properties:
                  id:
                    type: integer
                    example: 1
                  nombre:
                    type: string
                    example: "Administrador"
              datosPersonales:
                type: object
                properties:
                  idPersona:
                    type: integer
                    example: 1
                  cedula:
                    type: string
                    example: "001-0012345-6"
                  fechaNacimiento:
                    type: string
                    format: date
                    example: "1990-01-01"
                  estadoCivil:
                    type: string
                    example: "soltero"
                  sexo:
                    type: string
                    example: "M"
                  telefono:
                    type: string
                    example: "8091234567"
                  tipoPersona:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      nombre:
                        type: string
                        example: "Administrador"
                  ubicacion:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      direccion:
                        type: string
                        example: "Calle Principal #123"
                      municipio:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 5
                          nombre:
                            type: string
                            example: "Santo Domingo Este"
                      provincia:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 2
                          nombre:
                            type: string
                            example: "Santo Domingo"
              permisos:
                type: object
                properties:
                  crear:
                    type: boolean
                    example: true
                  editar:
                    type: boolean
                    example: true
                  eliminar:
                    type: boolean
                    example: true
              role:
                type: string
                example: "administrador"

    FileUploadResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Archivo subido exitosamente"
        data:
          type: object
          properties:
            url:
              type: string
              example: "https://supabase.storage.url/uploads/1234567890-archivo.jpg"
            fileName:
              type: string
              example: "uploads/1234567890-archivo.jpg"
            userId:
              type: integer
              example: 1
              description: "ID del usuario (solo para tipo 'perfil')"
            solicitudId:
              type: integer
              example: 2
              description: "ID de la solicitud (solo para documentos)"
            documentType:
              type: string
              example: "cedula"
              description: "Tipo de documento (solo para documentos)"
            type:
              type: string
              enum: [perfil, documento]
              example: "documento"
              description: "Tipo de archivo subido"

    PersonaDeleteRequest:
      type: object
      required:
        - idPersona
      properties:
        idPersona:
          type: integer
          example: 1
        deshabilitarUsuario:
          type: boolean
          description: Indica si se debe deshabilitar también el usuario asociado
          example: true
          default: true

    UserProfile:
      type: object
      properties:
        id:
          type: integer
          example: 1
        nombres:
          type: string
          example: "Juan Carlos"
        apellidos:
          type: string
          example: "Pérez Rodríguez"
        correo:
          type: string
          example: "juancarlos@ejemplo.com"
        estado:
          type: string
          enum: [activo, inactivo, deshabilitado]
          example: "activo"
        fechaCreacion:
          type: string
          format: date-time
          example: "2023-05-15T14:30:00Z"
        ftPerfil:
          type: string
          example: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQE..."
        tipoUsuario:
          type: object
          properties:
            id:
              type: integer
              example: 2
            nombre:
              type: string
              example: "Administrador"
        permisos:
          type: object
          properties:
            crear:
              type: boolean
              example: true
            editar:
              type: boolean
              example: true
            eliminar:
              type: boolean
              example: true
        role:
          type: string
          example: "administrador"
        datosPersonales:
          type: object
          properties:
            idPersona:
              type: integer
              example: 1
            cedula:
              type: string
              example: "40212345678"
            fechaNacimiento:
              type: string
              format: date
              example: "1990-01-15"
            estadoCivil:
              type: string
              example: "soltero"
            sexo:
              type: string
              enum: [M, F]
              example: "M"
            telefono:
              type: string
              example: "8091234567"
            tipoPersona:
              type: object
              properties:
                id:
                  type: integer
                  example: 1
                nombre:
                  type: string
                  example: "Ciudadano"
              ubicacion:
                type: object
                properties:
                  id:
                    type: integer
                    example: 1
                  direccion:
                    type: string
                    example: "Calle Principal #123"
                  municipio:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 5
                      nombre:
                        type: string
                        example: "Santo Domingo Este"
                    provincia:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 2
                        nombre:
                          type: string
                          example: "Santo Domingo"

    Solicitud:
      type: object
      properties:
        idpersona:
          type: integer
          description: ID del ciudadano que creó la solicitud
          example: 10
        idempleado:
          type: integer
          description: ID del empleado asignado a la solicitud
          example: 5
        idmatricula:
          type: integer
          description: ID de la matrícula asociada
          example: 15
        idvehiculo:
          type: integer
          description: ID del vehículo asociado
          example: 20
        doccedula:
          type: string
          description: URL del documento de cédula
          example: "https://storage.url/cedulas/12345678.pdf"
        doclicencia:
          type: string
          description: URL del documento de licencia
          example: "https://storage.url/licencias/12345678.pdf"
        docseguro:
          type: string
          description: URL del documento de seguro (opcional)
          example: "https://storage.url/seguros/s12345.pdf"
        docfacturavehiculo:
          type: string
          description: URL del documento de factura del vehículo
          example: "https://storage.url/facturas/f12345.pdf"
        estadodecision:
          type: string
          description: Estado de la solicitud
          enum: [Pendiente, Aprobada, Rechazada]
          example: "Pendiente"
        motivorechazo:
          type: string
          description: Motivo de rechazo (si aplica)
          example: "Documentación incompleta"
        notarevision:
          type: string
          description: Notas de revisión (si aplica)
          example: "Todos los documentos están en orden"
        detallerechazo:
          type: string
          description: Detalles del motivo de rechazo (si aplica)
          example: "La licencia de conducir está vencida"
        fecharegistro:
          type: string
          format: date
          description: Fecha de creación de la solicitud
          example: "2023-05-15"
        fechaprocesada:
          type: string
          format: date-time
          description: Fecha y hora en que se procesó la solicitud
          example: "2023-05-20T14:35:42.000Z"
        chasis:
          type: string
          description: Número de chasis del vehículo
          example: "5YJSA1E27KF302623"
        tipouso:
          type: string
          description: Tipo de uso del vehículo
          example: "Personal"
        idmodelo:
          type: integer
          description: ID del modelo del vehículo
          example: 1
        modelonombre:
          type: string
          description: Nombre del modelo del vehículo
          example: "CBR 150R"
        año:
          type: integer
          description: Año del modelo
          example: 2022
        color:
          type: string
          description: Color del vehículo
          example: "Negro"
        cilindraje:
          type: string
          description: Cilindraje del vehículo
          example: "150cc"
        marcanombre:
          type: string
          description: Nombre de la marca del vehículo
          example: "Honda"
        idmarca:
          type: integer
          description: ID de la marca del vehículo
          example: 1
        matriculagenerada:
          type: string
          description: Número de matrícula generada
          example: "K123456"
        estadomatricula:
          type: string
          description: Estado de la matrícula
          enum: [Pendiente, Generada, Cancelada, Transferida]
          example: "Generada"
        fechaemisionmatricula:
          type: string
          format: date
          description: Fecha de emisión de la matrícula
          example: "2023-05-20"
        ciudadanonombres:
          type: string
          description: Nombres del ciudadano
          example: "Juan Carlos"
        ciudadanoapellidos:
          type: string
          description: Apellidos del ciudadano
          example: "Pérez Gómez"
        ciudadanocedula:
          type: string
          description: Cédula del ciudadano
          example: "123-4567890-1"
        empleadonombres:
          type: string
          description: Nombres del empleado asignado
          example: "María Elena"
        empleadoapellidos:
          type: string
          description: Apellidos del empleado asignado
          example: "Sánchez Rodríguez"
        proveedor:
          type: string
          description: Proveedor del seguro (si aplica)
          example: "Seguros Atlantica"
        numeropoliza:
          type: string
          description: Número de póliza del seguro (si aplica)
          example: "PL98765432"
    
    Notificacion:
      type: object
      properties:
        idnotificacion:
          type: integer
          description: ID de la notificación
          example: 1
        mensaje:
          type: string
          description: Contenido del mensaje de la notificación
          example: "Su solicitud para el vehículo con chasis 5YJSA1E27KF302623 ha sido aprobada."
        titulo:
          type: string
          description: Título de la notificación
          example: "Solicitud Aprobada"
        estado:
          type: string
          description: Estado de la notificación
          enum: [Pendiente, Enviada, Leida, Confirmada, Cancelada, Error]
          example: "Enviada"
        fechacreacion:
          type: string
          format: date
          description: Fecha de creación de la notificación
          example: "2023-05-20"
        idusuario:
          type: integer
          description: ID del usuario destinatario
          example: 7

    MatriculaBasica:
      type: object
      properties:
        idmatricula:
          type: integer
          example: 1
        matriculagenerada:
          type: string
          example: "K123456"
        estado:
          type: string
          enum: [Generada, Pendiente, Cancelada, Transferida]
          example: "Generada"
        fechaemisionmatricula:
          type: string
          format: date-time
          example: "2023-12-15"
        chasis:
          type: string
          example: "1HGCM82633A123456"
        nombres:
          type: string
          example: "Juan"
        apellidos:
          type: string
          example: "Pérez"
        cedula:
          type: string
          example: "40212345678"
    
    MatriculaCompleta:
      type: object
      properties:
        idmatricula:
          type: integer
          example: 1
        matriculagenerada:
          type: string
          example: "K123456"
        estadomatricula:
          type: string
          enum: [Generada, Pendiente, Cancelada, Transferida]
          example: "Generada"
        fechaemisionmatricula:
          type: string
          format: date-time
          example: "2023-12-15"
        idvehiculo:
          type: integer
          example: 1
        chasis:
          type: string
          example: "1HGCM82633A123456"
        tipouso:
          type: string
          example: "Personal"
        idpropietario:
          type: integer
          example: 1
        nombrepropietario:
          type: string
          example: "Juan"
        apellidopropietario:
          type: string
          example: "Pérez"
        cedulapropietario:
          type: string
          example: "40212345678"
        idmodelo:
          type: integer
          example: 1
        nombremodelo:
          type: string
          example: "CBR 600"
        añomodelo:
          type: integer
          example: 2023
        idmarca:
          type: integer
          example: 1
        nombremarca:
          type: string
          example: "Honda"

    SolicitudCreateRequest:
      type: object
      required:
        - chasis
        - tipoUso
        - idMarca
        - idModelo
        - color
        - cilindraje
        - ano
        - cedula
        - licencia
        - factura
        - persona
      properties:
        # Datos del vehículo
        chasis:
          type: string
          description: Número de chasis del vehículo (17 caracteres)
          example: "5YJSA1E27KF302623"
        tipoUso:
          type: string
          description: Tipo de uso del vehículo
          enum: [Personal, Recreativo, Transporte, Deportivo, Empresarial]
          example: "Personal"
        idMarca:
          type: integer
          description: ID de la marca del vehículo
          example: 1
        idModelo:
          type: integer
          description: ID del modelo del vehículo
          example: 1
        color:
          type: string
          description: Color del vehículo
          example: "Negro"
        cilindraje:
          type: string
          description: Cilindraje del vehículo
          example: "150cc"
        ano:
          type: integer
          description: Año del vehículo
          example: 2022
        # Datos del seguro (solo idSeguro y numeroPoliza)
        seguro:
          type: object
          description: Información del seguro (opcional)
          properties:
            idSeguro:
              type: integer
              description: ID del seguro existente
              example: 5
            numeroPoliza:
              type: string
              description: Número de póliza del seguro
              example: "PL98765432"
        # Datos de persona/ciudadano (en el orden específico solicitado)
        persona:
          type: object
          description: Información de la persona (requerida)
          required:
            - nombres
            - apellidos
            - cedula
          properties:
            nombres:
              type: string
              description: Nombres completos
              example: "Juan Carlos"
            apellidos:
              type: string
              description: Apellidos completos
              example: "Pérez Rodríguez"
            cedula:
              type: string
              description: Cédula de identidad (11 dígitos)
              example: "40212345678"
            fechaNacimiento:
              type: string
              format: date
              description: Fecha de nacimiento
              example: "1990-01-15"
            estadoCivil:
              type: string
              enum: [soltero, casado, divorciado, viudo]
              description: Estado civil
              example: "soltero"
            sexo:
              type: string
              enum: [M, F]
              description: Sexo (M o F)
              example: "M"
            telefono:
              type: string
              description: Número de teléfono (10 dígitos)
              example: "8091234567"
            correo:
              type: string
              format: email
              description: Correo electrónico
              example: "usuario@ejemplo.com"
            direccion:
              type: string
              description: Dirección completa
              example: "Calle Principal #123, Santo Domingo"
            idProvincia:
              type: integer
              description: ID de la provincia donde vive
              example: 1
            idMunicipio:
              type: integer
              description: ID del municipio donde vive
              example: 1
        # Documentos obligatorios
        cedula:
          type: string
          format: binary
          description: Archivo de cédula a subir (imagen o PDF). Obligatorio.
        licencia:
          type: string
          format: binary
          description: Archivo de licencia a subir (imagen o PDF). Obligatorio.
        factura:
          type: string
          format: binary
          description: Archivo de factura del vehículo a subir (imagen o PDF). Obligatorio.
        seguro_doc:
          type: string
          format: binary
          description: Archivo de seguro a subir (imagen o PDF). Opcional.

    SolicitudResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Solicitud creada exitosamente"
        data:
          type: object
          properties:
            idpersona:
              type: integer
              example: 10
            idempleado:
              type: integer
              example: 5
            idmatricula:
              type: integer
              example: 15
            idvehiculo:
              type: integer
              example: 20
            idsolicitud:
              type: integer
              example: 25
            doccedula:
              type: string
              example: "/uploads/cedulas/12345678.pdf"
            doclicencia:
              type: string
              example: "/uploads/licencias/12345678.pdf"
            docseguro:
              type: string
              example: "/uploads/seguros/s12345.pdf"
            docfacturavehiculo:
              type: string
              example: "/uploads/facturas/f12345.pdf"
            estadodecision:
              type: string
              example: "Pendiente"
            motivorechazo:
              type: string
              example: null
            notarevision:
              type: string
              example: null
            detallerechazo:
              type: string
              example: null
            fecharegistro:
              type: string
              format: date-time
              example: "2023-05-15T10:30:00.000Z"
            fechaprocesada:
              type: string
              format: date-time
              example: null
            chasis:
              type: string
              example: "5YJSA1E27KF302623"
            tipouso:
              type: string
              example: "Personal"
            idmodelo:
              type: integer
              example: 1
            modelonombre:
              type: string
              example: "CBR 150R"
            ano:
              type: integer
              example: 2022
            color:
              type: string
              example: "Negro"
            cilindraje:
              type: string
              example: "150cc"
            marcanombre:
              type: string
              example: "Honda"
            idmarca:
              type: integer
              example: 1
            matriculagenerada:
              type: string
              example: null
            estadomatricula:
              type: string
              example: "Pendiente"
            fechaemisionmatricula:
              type: string
              format: date-time
              example: null
            ciudadanonombres:
              type: string
              example: "Juan Carlos"
            ciudadanoapellidos:
              type: string
              example: "Pérez Gómez"
            ciudadanocedula:
              type: string
              example: "40212345678"
            ciudadanotelefono:
              type: string
              example: "8091234567"
            ciudadanocorreo:
              type: string
              example: "juanperez@ejemplo.com"
            empleadonombres:
              type: string
              example: null
            empleadoapellidos:
              type: string
              example: null
            numeropoliza:
              type: string
              example: "PL98765432"
            idseguro:
              type: integer
              example: 5
            encola:
              type: boolean
              example: false


paths:
  # ===== RUTAS DE AUTENTICACIÓN =====
  /register:
    post:
      tags:
        - Autenticación
      summary: Registrar un nuevo usuario
      description: Crea una nueva cuenta de usuario cliente
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: Usuario registrado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          description: Datos inválidos o correo ya registrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /login:
    post:
      tags:
        - Autenticación
      summary: Iniciar sesión
      description: Autentica un usuario y devuelve tokens de acceso. Solo los usuarios con estado 'activo' pueden iniciar sesión.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Inicio de sesión exitoso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Credenciales inválidas o usuario inactivo/deshabilitado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /refresh-token:
    post:
      tags:
        - Autenticación
      summary: Refrescar token de acceso
      description: Genera un nuevo token de acceso usando un refresh token válido
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: Token actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Token inválido o expirado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ===== RUTAS DE USUARIOS =====
  /user:
    get:
      tags:
        - Usuarios
      summary: Obtener listado de usuarios
      description: Obtiene un listado de usuarios con filtros opcionales (solo para empleados y administradores)
      security:
        - BearerAuth: []
      parameters:
        - name: nombres
          in: query
          description: Filtrar por nombres
          schema:
            type: string
        - name: apellidos
          in: query
          description: Filtrar por apellidos
          schema:
            type: string
        - name: correo
          in: query
          description: Filtrar por correo electrónico
          schema:
            type: string
        - name: estado
          in: query
          description: Filtrar por estado
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
        - name: idTipoUsuario
          in: query
          description: Filtrar por tipo de usuario
          schema:
            type: integer
      responses:
        '200':
          description: Listado de usuarios obtenido exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsersListResponse'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Usuarios
      summary: Crear usuario
      description: Crea un nuevo usuario (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreateRequest'
      responses:
        '201':
          description: Usuario creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Usuarios
      summary: Actualizar usuario
      description: Actualiza un usuario existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdateRequest'
      responses:
        '200':
          description: Usuario actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Usuarios
      summary: Eliminar usuario
      description: Elimina un usuario existente y su registro de Persona asociado si existe (marcando ambos como 'deshabilitado') (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserDeleteRequest'
      responses:
        '200':
          description: Usuario y registro de persona asociado eliminados exitosamente
        content:
          application/json:
            schema:
              type: object
              properties:
                  success:
                    type: boolean
                    example: true
                  message:
                  type: string
                    example: "Usuario y datos personales deshabilitados exitosamente"
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /profile:
    put:
      tags:
        - Usuarios
      summary: Actualizar perfil de usuario
      description: Permite al usuario actualizar la información básica de su perfil (nombres, apellidos, correo)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nombres:
                  type: string
                  example: "Juan"
                apellidos:
                  type: string
                  example: "Pérez"
                correo:
                  type: string
                  format: email
                  example: "juan@example.com"
                ftPerfil:
                  type: string
                  description: URL o datos base64 de la foto de perfil
                  example: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQE..."
      responses:
        '200':
          description: Perfil actualizado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Perfil actualizado exitosamente"
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      nombres:
                        type: string
                        example: "Juan"
                      apellidos:
                        type: string
                        example: "Pérez"
                      correo:
                        type: string
                        example: "juan@example.com"
                      ftPerfil:
                        type: string
                        example: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQE..."
                      fechaCreacion:
                        type: string
                        format: date-time
                        example: "2023-01-15T14:30:00Z"
                      datosPersonales:
                        type: object
                        properties:
                          idPersona:
                            type: integer
                            example: 5
                          cedula:
                            type: string
                            example: "40212345678"
                          fechaNacimiento:
                            type: string
                            format: date
                            example: "1990-01-15"
                          estadoCivil:
                            type: string
                            example: "soltero"
                          sexo:
                            type: string
                            example: "M"
                          telefono:
                            type: string
                            example: "8091234567"
                          tipoPersona:
                            type: object
                            properties:
                              id:
                                type: integer
                                example: 1
                              nombre:
                                type: string
                                example: "Ciudadano"
                          ubicacion:
                            type: object
                            properties:
                              id:
                                type: integer
                                example: 3
                              direccion:
                                type: string
                                example: "Calle Principal #123"
                              municipio:
                                type: object
                                properties:
                                  id:
                                    type: integer
                                    example: 5
                                  nombre:
                                    type: string
                                    example: "Santo Domingo Este"
                                provincia:
                                  type: object
                                  properties:
                                    id:
                                      type: integer
                                      example: 2
                                    nombre:
                                      type: string
                                      example: "Santo Domingo"
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /changePassword:
    put:
      tags:
        - Usuarios
      summary: Cambiar contraseña
      description: Permite al usuario cambiar su contraseña
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                currentPassword:
                  type: string
                  format: password
                  example: "Contraseña1"
                newPassword:
                  type: string
                  format: password
                  example: "NuevaContraseña2"
                confirmPassword:
                  type: string
                  format: password
                  example: "NuevaContraseña2"
              required:
                - currentPassword
                - newPassword
                - confirmPassword
      responses:
        '200':
          description: Contraseña actualizada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Contraseña actualizada exitosamente"
        '400':
          description: Datos inválidos o contraseña actual incorrecta
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # Añadir a tu archivo swagger.yml

  /profilePicture:
    post:
      tags:
        - Usuarios
      summary: Subir archivo a Supabase
      description: Sube un archivo (foto de perfil o documento) a Supabase Storage y actualiza la base de datos. Si se sube un documento y no se proporciona ID de solicitud, se crea una nueva solicitud automáticamente.
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
                - fileType
              properties:
                file:
                  type: string
                  format: binary
                  description: Archivo a subir (imagen o documento)
                fileType:
                  type: string
                  enum: [perfil, cedula, licencia, seguro, factura]
                  description: Tipo de archivo que se está subiendo
                solicitudId:
                  type: integer
                  description: ID de la solicitud (opcional, solo para documentos). Si no se proporciona, se crea una nueva solicitud.
      responses:
        '201':
          description: Archivo subido exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileUploadResponse'
        '400':
          description: Error en los datos de entrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /profileToken:
    get:
      tags:
        - Usuarios
      summary: Obtener perfil del usuario autenticado
      description: Devuelve información completa del perfil del usuario basada en su token de autenticación
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Perfil de usuario obtenido exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      nombres:
                        type: string
                        example: "Juan"
                      apellidos:
                        type: string
                        example: "Pérez"
                      correo:
                        type: string
                        format: email
                        example: "juan@example.com"
                      ftPerfil:
                        type: string
                        example: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQE..."
                      fechaCreacion:
                        type: string
                        format: date-time
                        example: "2023-01-01T10:00:00Z"
                      role:
                        type: string
                        example: "ciudadano"
                      permisos:
                        type: object
                        properties:
                          crear:
                            type: boolean
                            example: false
                          editar:
                            type: boolean
                            example: false
                          eliminar:
                            type: boolean
                            example: false
                      datosPersonales:
                        type: object
                        properties:
                          idPersona:
                            type: integer
                            example: 1
                          cedula:
                            type: string
                            example: "001-0012345-6"
                          fechaNacimiento:
                            type: string
                            format: date
                            example: "1990-01-01"
                          estadoCivil:
                            type: string
                            example: "soltero"
                          sexo:
                            type: string
                            example: "M"
                          telefono:
                            type: string
                            example: "8091234567"
                          tipoPersona:
                            type: object
                            properties:
                              id:
                                type: integer
                                example: 1
                              nombre:
                                type: string
                                example: "ciudadano"
                          ubicacion:
                            type: object
                            properties:
                              id:
                                type: integer
                                example: 1
                              direccion:
                                type: string
                                example: "Calle Principal #123"
                              municipio:
                                type: object
                                properties:
                                  id:
                                    type: integer
                                    example: 5
                                  nombre:
                                    type: string
                                    example: "Santo Domingo Este"
                                provincia:
                                  type: object
                                  properties:
                                    id:
                                      type: integer
                                      example: 2
                                    nombre:
                                      type: string
                                      example: "Santo Domingo"
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ===== RUTAS DE TIPOS DE USUARIO =====
  /tipoUsuario:
    get:
      tags:
        - Tipos de Usuario
      summary: Obtener todos los tipos de usuario
      description: Obtiene un listado de todos los tipos de usuario (solo para empleados y administradores)
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Tipos de usuario obtenidos exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TiposUsuarioListResponse'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Tipos de Usuario
      summary: Crear tipo de usuario
      description: Crea un nuevo tipo de usuario (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TipoUsuarioCreateRequest'
      responses:
        '201':
          description: Tipo de usuario creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TipoUsuarioResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Tipos de Usuario
      summary: Actualizar tipo de usuario
      description: Actualiza un tipo de usuario existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TipoUsuarioUpdateRequest'
      responses:
        '200':
          description: Tipo de usuario actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TipoUsuarioResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Tipo de usuario no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Tipos de Usuario
      summary: Eliminar tipo de usuario
      description: Elimina un tipo de usuario existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TipoUsuarioDeleteRequest'
      responses:
        '200':
          description: Tipo de usuario eliminado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Tipo de usuario eliminado exitosamente"
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Tipo de usuario no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ===== RUTAS DE PROVINCIAS =====
  /provincia:
    get:
      tags:
        - Provincias
      summary: Obtener todas las provincias
      description: Obtiene un listado de todas las provincias
      parameters:
        - name: id
          in: query
          description: Filtrar por ID
          schema:
                        type: integer
        - name: nombre
          in: query
          description: Filtrar por nombre
          schema:
                        type: string
        - name: estado
          in: query
          description: Filtrar por estado
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
      responses:
        '200':
          description: Provincias obtenidas exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProvinciasListResponse'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Provincias
      summary: Crear provincia
      description: Crea una nueva provincia (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProvinciaCreateRequest'
      responses:
        '201':
          description: Provincia creada exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProvinciaResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Provincias
      summary: Actualizar provincia
      description: Actualiza una provincia existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProvinciaUpdateRequest'
      responses:
        '200':
          description: Provincia actualizada exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProvinciaResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Provincia no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Provincias
      summary: Eliminar provincia
      description: Elimina una provincia existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProvinciaDeleteRequest'
      responses:
        '200':
          description: Provincia eliminada exitosamente
        content:
          application/json:
            schema:
              type: object
              properties:
                  success:
                    type: boolean
                    example: true
                  message:
                  type: string
                    example: "Provincia eliminada exitosamente"
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Provincia no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ===== RUTAS DE MUNICIPIOS =====
  /municipio:
    get:
      tags:
        - Municipios
      summary: Obtener todos los municipios
      description: Obtiene un listado de todos los municipios
      parameters:
        - name: id
          in: query
          description: Filtrar por ID
          schema:
            type: integer
        - name: nombre
          in: query
          description: Filtrar por nombre
          schema:
                  type: string
        - name: estado
          in: query
          description: Filtrar por estado
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
        - name: idProvincia
          in: query
          description: Filtrar por provincia
          schema:
            type: integer
      responses:
        '200':
          description: Municipios obtenidos exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MunicipiosListResponse'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Municipios
      summary: Crear municipio
      description: Crea un nuevo municipio (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MunicipioCreateRequest'
      responses:
        '201':
          description: Municipio creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MunicipioResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Municipios
      summary: Actualizar municipio
      description: Actualiza un municipio existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MunicipioUpdateRequest'
      responses:
        '200':
          description: Municipio actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MunicipioResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Municipio no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Municipios
      summary: Eliminar municipio
      description: Elimina un municipio existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MunicipioDeleteRequest'
      responses:
        '200':
          description: Municipio eliminado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Municipio eliminado exitosamente"
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Municipio no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ===== RUTAS DE UBICACIONES =====
  /ubicacion:
    get:
      tags:
        - Ubicaciones
      summary: Obtener todas las ubicaciones
      description: Obtiene un listado de todas las ubicaciones
      parameters:
        - name: id
          in: query
          description: Filtrar por ID
          schema:
            type: integer
        - name: direccion
          in: query
          description: Filtrar por dirección
          schema:
            type: string
        - name: estado
          in: query
          description: Filtrar por estado
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
        - name: idMunicipio
          in: query
          description: Filtrar por municipio
          schema:
            type: integer
      responses:
        '200':
          description: Ubicaciones obtenidas exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UbicacionesListResponse'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Ubicaciones
      summary: Crear ubicación
      description: Crea una nueva ubicación (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UbicacionCreateRequest'
      responses:
        '201':
          description: Ubicación creada exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UbicacionResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Ubicaciones
      summary: Actualizar ubicación
      description: Actualiza una ubicación existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UbicacionUpdateRequest'
      responses:
        '200':
          description: Ubicación actualizada exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UbicacionResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Ubicación no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Ubicaciones
      summary: Eliminar ubicación
      description: Elimina una ubicación existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UbicacionDeleteRequest'
      responses:
        '200':
          description: Ubicación eliminada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Ubicación eliminada exitosamente"
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Ubicación no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /persona:
    get:
      tags:
        - Personas
      summary: Obtener listado de personas
      description: Obtiene un listado de personas con filtros opcionales (solo para empleados y administradores)
      security:
        - BearerAuth: []
      parameters:
        - name: nombres
          in: query
          description: Filtrar por nombres
          schema:
            type: string
        - name: apellidos
          in: query
          description: Filtrar por apellidos
          schema:
            type: string
        - name: cedula
          in: query
          description: Filtrar por cédula
          schema:
            type: string
        - name: tipoPersona
          in: query
          description: Filtrar por tipo de persona
          schema:
            type: string
        - name: estado
          in: query
          description: Filtrar por estado
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
        - name: limit
          in: query
          description: Limitar cantidad de resultados
          schema:
            type: integer
        - name: offset
          in: query
          description: Desplazamiento de resultados
          schema:
            type: integer
      responses:
        '200':
          description: Listado de personas obtenido exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonasListResponse'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Personas
      summary: Create personal profile
      description: Creates a personal profile for the currently authenticated user
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PersonaCreateRequest'
      responses:
        '201':
          description: Profile created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonaResponse'
        '400':
          description: Invalid data or profile already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - User not authenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      tags:
        - Personas
      summary: Update personal profile
      description: Updates the personal profile of the authenticated user or a profile that an admin/employee has permission to modify
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PersonaUpdateRequest'
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonaResponse'
        '400':
          description: Invalid data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - User not authenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User doesn't have permission to update this profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Profile not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      tags:
        - Personas
      summary: Deshabilitar perfil personal
      description: Deshabilita un perfil personal y opcionalmente su usuario asociado (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PersonaDeleteRequest'
      responses:
        '200':
          description: Perfil personal deshabilitado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Perfil personal y usuario asociado deshabilitados exitosamente"
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Perfil no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # ===== RUTAS DE TIPO PERSONA =====
  /tipoPersona:
    get:
      tags:
        - Tipos de Persona
      summary: Obtener todos los tipos de persona
      description: Obtiene un listado de todos los tipos de persona (solo para empleados y administradores)
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Tipos de persona obtenidos exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TiposPersonaListResponse'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Tipos de Persona
      summary: Crear tipo de persona
      description: Crea un nuevo tipo de persona (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TipoPersonaCreateRequest'
      responses:
        '201':
          description: Tipo de persona creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TipoPersonaResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Tipos de Persona
      summary: Actualizar tipo de persona
      description: Actualiza un tipo de persona existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - type: object
                  required:
                    - idTipoPersona
                  properties:
                    idTipoPersona:
                      type: integer
                      description: ID del tipo de persona a actualizar
                      example: 1
                - $ref: '#/components/schemas/TipoPersonaUpdateRequest'
      responses:
        '200':
          description: Tipo de persona actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TipoPersonaResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Tipo de persona no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Tipos de Persona
      summary: Eliminar tipo de persona
      description: Elimina un tipo de persona existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - idTipoPersona
              properties:
                idTipoPersona:
                  type: integer
                  description: ID del tipo de persona a eliminar
                  example: 1
      responses:
        '200':
          description: Tipo de persona eliminado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Tipo de persona eliminado exitosamente"
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Tipo de persona no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ===== RUTAS DE MARCAS =====
  /marca:
    get:
      tags:
        - Marcas
      summary: Obtener todas las marcas
      description: Obtiene un listado de todas las marcas de vehículos
      parameters:
        - name: id
          in: query
          description: Filtrar por ID
          schema:
            type: integer
        - name: nombre
          in: query
          description: Filtrar por nombre
          schema:
            type: string
        - name: estado
          in: query
          description: Filtrar por estado
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
      responses:
        '200':
          description: Marcas obtenidas exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MarcasListResponse'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Marcas
      summary: Crear marca
      description: Crea una nueva marca de vehículo (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MarcaCreateRequest'
      responses:
        '201':
          description: Marca creada exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MarcaResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Marcas
      summary: Actualizar marca
      description: Actualiza una marca de vehículo existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MarcaUpdateRequest'
      responses:
        '200':
          description: Marca actualizada exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MarcaResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Marca no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Marcas
      summary: Eliminar marca
      description: Elimina una marca de vehículo existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MarcaDeleteRequest'
      responses:
        '200':
          description: Marca eliminada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Marca eliminada exitosamente"
        '400':
          description: Datos inválidos o marca en uso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Marca no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ===== RUTAS DE MODELOS =====
  /modelo:
    get:
      tags:
        - Modelos
      summary: Obtener todos los modelos
      description: Obtiene un listado de todos los modelos de vehículos
      parameters:
        - name: id
          in: query
          description: Filtrar por ID
          schema:
            type: integer
        - name: nombre
          in: query
          description: Filtrar por nombre
          schema:
            type: string
        - name: año
          in: query
          description: Filtrar por año
          schema:
            type: integer
        - name: color
          in: query
          description: Filtrar por color
          schema:
            type: string
        - name: cilindraje
          in: query
          description: Filtrar por cilindraje
          schema:
            type: string
        - name: idMarca
          in: query
          description: Filtrar por marca
          schema:
            type: integer
        - name: estado
          in: query
          description: Filtrar por estado
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
      responses:
        '200':
          description: Modelos obtenidos exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelosListResponse'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Modelos
      summary: Crear modelo
      description: Crea un nuevo modelo de vehículo (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ModeloCreateRequest'
      responses:
        '201':
          description: Modelo creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModeloResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Modelos
      summary: Actualizar modelo
      description: Actualiza un modelo de vehículo existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ModeloUpdateRequest'
      responses:
        '200':
          description: Modelo actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModeloResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Modelo no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Modelos
      summary: Eliminar modelo
      description: Elimina un modelo de vehículo existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ModeloDeleteRequest'
      responses:
        '200':
          description: Modelo eliminado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Modelo eliminado exitosamente"
        '400':
          description: Datos inválidos o modelo en uso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Modelo no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ===== RUTAS DE TIPOS DE VEHÍCULO =====
  /tipovehiculo:
    get:
      tags:
        - Tipos de Vehículo
      summary: Obtener todos los tipos de vehículo
      description: Obtiene un listado de todos los tipos de vehículo
      parameters:
        - name: id
          in: query
          description: Filtrar por ID
          schema:
            type: integer
        - name: nombre
          in: query
          description: Filtrar por nombre
          schema:
            type: string
        - name: capacidad
          in: query
          description: Filtrar por capacidad
          schema:
            type: integer
        - name: estado
          in: query
          description: Filtrar por estado
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
      responses:
        '200':
          description: Tipos de vehículo obtenidos exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TiposVehiculoListResponse'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Tipos de Vehículo
      summary: Crear tipo de vehículo
      description: Crea un nuevo tipo de vehículo (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TipoVehiculoCreateRequest'
      responses:
        '201':
          description: Tipo de vehículo creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TipoVehiculoResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Tipos de Vehículo
      summary: Actualizar tipo de vehículo
      description: Actualiza un tipo de vehículo existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TipoVehiculoUpdateRequest'
      responses:
        '200':
          description: Tipo de vehículo actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TipoVehiculoResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Tipo de vehículo no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Tipos de Vehículo
      summary: Eliminar tipo de vehículo
      description: Elimina un tipo de vehículo existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TipoVehiculoDeleteRequest'
      responses:
        '200':
          description: Tipo de vehículo eliminado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Tipo de vehículo eliminado exitosamente"
        '400':
          description: Datos inválidos o tipo de vehículo en uso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Tipo de vehículo no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ===== RUTAS DE SEGUROS =====
  /seguro:
    get:
      tags:
        - Seguros
      summary: Obtener todos los seguros
      description: Obtiene un listado de todos los seguros
      parameters:
        - name: id
          in: query
          description: Filtrar por ID
          schema:
            type: integer
        - name: proveedor
          in: query
          description: Filtrar por proveedor
          schema:
            type: string
        - name: numeroPoliza
          in: query
          description: Filtrar por número de póliza
          schema:
            type: string
        - name: estado
          in: query
          description: Filtrar por estado
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
      responses:
        '200':
          description: Seguros obtenidos exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SegurosListResponse'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Seguros
      summary: Crear seguro
      description: Crea un nuevo seguro (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SeguroCreateRequest'
      responses:
        '201':
          description: Seguro creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeguroResponse'
        '400':
          description: Datos inválidos o número de póliza duplicado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Seguros
      summary: Actualizar seguro
      description: Actualiza un seguro existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SeguroUpdateRequest'
      responses:
        '200':
          description: Seguro actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeguroResponse'
        '400':
          description: Datos inválidos o número de póliza duplicado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Seguro no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Seguros
      summary: Eliminar seguro
      description: Elimina un seguro existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SeguroDeleteRequest'
      responses:
        '200':
          description: Seguro eliminado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Seguro eliminado exitosamente"
        '400':
          description: Datos inválidos o seguro en uso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Seguro no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ===== RUTAS DE VEHÍCULOS =====
  /vehiculo:
    get:
      tags:
        - Vehículos
      summary: Obtener todos los vehículos
      description: Obtiene un listado de todos los vehículos
      parameters:
        - name: id
          in: query
          description: Filtrar por ID
          schema:
            type: integer
        - name: chasis
          in: query
          description: Filtrar por número de chasis
          schema:
            type: string
        - name: tipoUso
          in: query
          description: Filtrar por tipo de uso
          schema:
            type: string
            enum: [Personal, Recreativo, Transporte, Deportivo, Empresarial]
        - name: idModelo
          in: query
          description: Filtrar por modelo
          schema:
            type: integer
        - name: idPropietario
          in: query
          description: Filtrar por propietario
          schema:
            type: integer
        - name: idTipoVehiculo
          in: query
          description: Filtrar por tipo de vehículo
          schema:
            type: integer
        - name: idSeguro
          in: query
          description: Filtrar por seguro
          schema:
            type: integer
        - name: idMatricula
          in: query
          description: Filtrar por matrícula
          schema:
            type: integer
        - name: estado
          in: query
          description: Filtrar por estado
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
      responses:
        '200':
          description: Vehículos obtenidos exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VehiculosListResponse'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Vehículos
      summary: Crear vehículo
      description: Crea un nuevo vehículo (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VehiculoCreateRequest'
      responses:
        '201':
          description: Vehículo creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VehiculoResponse'
        '400':
          description: Datos inválidos o número de chasis duplicado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Vehículos
      summary: Actualizar vehículo
      description: Actualiza un vehículo existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VehiculoUpdateRequest'
      responses:
        '200':
          description: Vehículo actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VehiculoResponse'
        '400':
          description: Datos inválidos o número de chasis duplicado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Vehículo no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Vehículos
      summary: Eliminar vehículo
      description: Elimina un vehículo existente (solo para administradores)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VehiculoDeleteRequest'
      responses:
        '200':
          description: Vehículo eliminado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Vehículo eliminado exitosamente"
        '400':
          description: Datos inválidos o vehículo en uso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Vehículo no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # Adding path for admin-employees endpoint after the /user path
  /adminEmployees:
    get:
      tags:
        - Usuarios
      summary: Obtener administradores y empleados
      description: Obtiene una lista de todos los usuarios que son administradores o empleados, incluyendo su información personal (solo para empleados y administradores)
      security:
        - BearerAuth: []
      parameters:
        - name: nombres
          in: query
          description: Filtrar por nombres
          schema:
            type: string
        - name: apellidos
          in: query
          description: Filtrar por apellidos
          schema:
            type: string
        - name: cedula
          in: query
          description: Filtrar por número de cédula
          schema:
            type: string
        - name: cargo
          in: query
          description: Filtrar por cargo o tipo de persona
          schema:
            type: string
        - name: estado
          in: query
          description: Filtrar por estado del usuario
          schema:
            type: string
            enum: [activo, inactivo, deshabilitado]
      responses:
        '200':
          description: Lista de administradores y empleados obtenida exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminEmployeeUsersResponse'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /solicitud/crear:
    post:
      tags:
        - Solicitudes
      summary: Crear una nueva solicitud de matrícula
      description: Crea una nueva solicitud de matrícula con los datos del vehículo, propietario y documentos adjuntos
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SolicitudCreateRequest'
      responses:
        '201':
          description: Solicitud creada exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SolicitudResponse'

  /solicitud/mis-solicitudes:
    get:
      tags:
        - Solicitudes
      summary: Obtener las solicitudes del ciudadano autenticado
      description: Devuelve el historial de solicitudes de matrícula del ciudadano que hace la petición
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Lista de solicitudes obtenida correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  count:
                    type: integer
                    description: Número total de solicitudes
                    example: 2
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Solicitud'
        '401':
          description: No autorizado, token requerido o inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
                
  /solicitud/limite-vehiculos:
    get:
      tags:
        - Solicitudes
      summary: Obtener información sobre el límite de vehículos del ciudadano
      description: Verifica si el ciudadano ha alcanzado el límite de vehículos permitidos (2 vehículos por ciudadano)
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Información de límite obtenida correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      cantidadVehiculos:
                        type: integer
                        description: Número actual de vehículos activos con matrícula generada del ciudadano
                        example: 1
                      limiteAlcanzado:
                        type: boolean
                        description: Indica si el ciudadano ha alcanzado el límite máximo de vehículos
                        example: false
                      limiteMaximo:
                        type: integer
                        description: Número máximo de vehículos permitidos por ciudadano
                        example: 2
                      vehiculosDisponibles:
                        type: integer
                        description: Número de vehículos adicionales que puede registrar el ciudadano
                        example: 1
        '401':
          description: No autorizado, token requerido o inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Perfil de persona no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
                
  /solicitud/empleado/todas:
    get:
      tags:
        - Solicitudes
      summary: Obtener solicitudes asignadas al empleado
      description: Devuelve las solicitudes que han sido asignadas al empleado autenticado, con opciones de filtrado
      security:
        - BearerAuth: []
      parameters:
        - name: marca
          in: query
          required: false
          description: Filtrar por nombre de marca
          schema:
            type: string
            example: "Honda"
        - name: modelo
          in: query
          required: false
          description: Filtrar por nombre de modelo
          schema:
            type: string
            example: "CBR"
        - name: estado
          in: query
          required: false
          description: Filtrar por estado de la solicitud
          schema:
            type: string
            enum: [Pendiente, Aprobada, Rechazada]
            example: "Pendiente"
        - name: fechaDesde
          in: query
          required: false
          description: Filtrar por fecha desde (formato YYYY-MM-DD)
          schema:
            type: string
            format: date
            example: "2023-01-01"
        - name: fechaHasta
          in: query
          required: false
          description: Filtrar por fecha hasta (formato YYYY-MM-DD)
          schema:
            type: string
            format: date
            example: "2023-12-31"
      responses:
        '200':
          description: Solicitudes obtenidas correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  count:
                    type: integer
                    description: Número total de solicitudes pendientes
                    example: 3
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Solicitud'
        '401':
          description: No autorizado, token requerido o inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso denegado, requiere rol de empleado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
                
  /solicitud/procesar:
    put:
      tags:
        - Solicitudes
      summary: Procesar una solicitud (aprobar o rechazar)
      description: Permite a un empleado aprobar o rechazar una solicitud de matrícula asignada
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - idVehiculo
                - estadoDecision
              properties:
                idVehiculo:
                  type: integer
                  description: ID del vehículo asociado a la solicitud (se usa como identificador de la solicitud)
                  example: 1
                estadoDecision:
                  type: string
                  description: Decisión sobre la solicitud
                  enum: [Aprobada, Rechazada]
                  example: "Aprobada"
                notaRevision:
                  type: string
                  description: Nota o comentario de revisión (obligatorio si se aprueba)
                  example: "Todos los documentos están en orden"
                motivoRechazo:
                  type: string
                  description: Motivo principal del rechazo (obligatorio si se rechaza)
                  example: "Documentación incompleta"
                detalleRechazo:
                  type: string
                  description: Detalle del motivo de rechazo (obligatorio si se rechaza)
                  example: "La licencia de conducir está vencida"
      responses:
        '200':
          description: Solicitud procesada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Solicitud aprobada exitosamente"
                  data:
                    $ref: '#/components/schemas/Solicitud'
        '400':
          description: Datos inválidos o requisitos incompletos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado, token requerido o inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso denegado, requiere rol de empleado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Solicitud no encontrada o no asignada al empleado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /solicitud/admin/todas:
    get:
      tags:
        - Solicitudes
      summary: Obtener todas las solicitudes (administrador)
      description: Permite a un administrador ver todas las solicitudes con filtros y paginación
      security:
        - BearerAuth: []
      parameters:
        - name: marca
          in: query
          required: false
          description: Filtrar por nombre de marca
          schema:
            type: string
            example: "Honda"
        - name: modelo
          in: query
          required: false
          description: Filtrar por nombre de modelo
          schema:
            type: string
            example: "CBR"
        - name: estado
          in: query
          required: false
          description: Filtrar por estado de la solicitud
          schema:
            type: string
            enum: [Pendiente, Aprobada, Rechazada]
            example: "Pendiente"
        - name: idEmpleado
          in: query
          required: false
          description: Filtrar por ID del empleado asignado
          schema:
            type: integer
            example: 5
        - name: fechaDesde
          in: query
          required: false
          description: Filtrar por fecha desde (formato YYYY-MM-DD)
          schema:
            type: string
            format: date
            example: "2023-01-01"
        - name: fechaHasta
          in: query
          required: false
          description: Filtrar por fecha hasta (formato YYYY-MM-DD)
          schema:
            type: string
            format: date
            example: "2023-12-31"
        - name: page
          in: query
          required: false
          description: Número de página para paginación
          schema:
            type: integer
            default: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Número de elementos por página
          schema:
            type: integer
            default: 10
            example: 10
      responses:
        '200':
          description: Solicitudes obtenidas correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  totalItems:
                    type: integer
                    description: Número total de solicitudes que coinciden con el filtro
                    example: 25
                  totalPages:
                    type: integer
                    description: Número total de páginas
                    example: 3
                  currentPage:
                    type: integer
                    description: Página actual
                    example: 1
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Solicitud'
        '401':
          description: No autorizado, token requerido o inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso denegado, requiere rol de administrador
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /solicitud/asignar:
    put:
      tags:
        - Solicitudes
      summary: Asignar una solicitud a un empleado
      description: Permite a un administrador asignar manualmente una solicitud a un empleado específico
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - idVehiculo
                - idEmpleado
              properties:
                idVehiculo:
                  type: integer
                  description: ID del vehículo asociado a la solicitud (se usa como identificador de la solicitud)
                  example: 1
                idEmpleado:
                  type: integer
                  description: ID del empleado al que se asignará la solicitud
                  example: 5
      responses:
        '200':
          description: Solicitud asignada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Solicitud asignada exitosamente"
                  data:
                    $ref: '#/components/schemas/Solicitud'
        '400':
          description: Datos inválidos o empleado no disponible
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: No autorizado, token requerido o inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Acceso denegado, requiere rol de administrador
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Solicitud no encontrada o no está pendiente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /matricula/todas:
    get:
      tags:
        - Matrículas
      summary: Obtener todas las matrículas con información completa
      description: Obtiene todas las matrículas con información del vehículo, propietario, modelo y marca (solo para empleados y administradores)
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Matrículas obtenidas exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  count:
                    type: integer
                    example: 2
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/MatriculaCompleta'
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Prohibido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /matricula/activas:
    get:
      tags:
        - Matrículas
      summary: Obtener matrículas activas
      description: Obtiene todas las matrículas con estado 'Generada'
      responses:
        '200':
          description: Matrículas obtenidas exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  count:
                    type: integer
                    example: 2
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/MatriculaBasica'
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
